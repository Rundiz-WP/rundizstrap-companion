(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"UU":"rundizstrap-companion/blocks-bs-button"}'),a=window.wp.i18n,n=window.wp.blockEditor,o=window.wp.dom,l=window.wp.components,r=window.wp.element,i=["data-","aria-"];function s(e,t){const a={};if(!e)return a;const n=String(t||"").toLowerCase();return i.includes(n)?(Object.entries(e).forEach(([e,t])=>{const o=u(e,n);o&&(a[`${n}${o}`]=c(t))}),a):a}function u(e,t=""){if(null==e)return"";let a=String(e).trim().toLowerCase();const n=String(t||"").toLowerCase();return a?(n&&a.startsWith(n)&&(a=a.slice(n.length)),a="aria-"===n||"aria"===n?a.replace(/[^a-z0-9_-]/g,""):a.replace(/[^a-z0-9._:-]/g,""),a):""}function c(e){return null==e?"":String(e).replace(/[\r\n\t]/g," ").replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]/g,"").trim()}const m=window.ReactJSXRuntime;function p({label:e,value:t,onChange:n,prefix:o=""}){const i=t||{},[s,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=Object.entries(i).map(([e,t])=>({key:e,val:t}));p(e)},[t]);const d=e=>e.reduce((e,t)=>{const a=u(t.key,o);return a?(e[a]=c(t.val),e):e},{}),b=(e,t,a)=>{const l=[...s];l[e][t]=a,p(l);const r=l.map(e=>u(e.key,o)).filter(e=>""!==e);r.some((e,t)=>r.indexOf(e)!==t)||n(d(l))};return(0,m.jsxs)("div",{className:"components-base-control",children:[(0,m.jsx)("label",{className:"components-base-control__label",children:e}),s.map((e,t)=>(0,m.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,m.jsx)(l.TextControl,{placeholder:(0,a.__)("Key","rundizstrap-companion"),value:e.key,onChange:e=>b(t,"key",e)}),(0,m.jsx)(l.TextControl,{placeholder:(0,a.__)("Value","rundizstrap-companion"),value:e.val,onChange:e=>b(t,"val",e)}),(0,m.jsx)(l.Button,{size:"small",isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const t=s.filter((t,a)=>a!==e);p(t),n(d(t))})(t),label:(0,a.__)("Remove","rundizstrap-companion")})]},t)),(0,m.jsx)(l.Button,{variant:"secondary",onClick:()=>{const e=[...s,{key:"",val:""}];p(e)},size:"small",children:(0,a.__)("Add attribute","rundizstrap-companion")})]})}(0,e.registerBlockType)(t.UU,{edit:function({attributes:e,setAttributes:t}){const{tagName:i,textHtml:u,href:c,linkRole:d,linkTabIndex:b,dataAttributes:_,ariaAttributes:x,autofocus:h,disabled:f,form:g,formenctype:v,formmethod:T,formnovalidate:j,formtarget:z,name:w,type:y,value:D,className:C}=e;(0,r.useEffect)(()=>{void 0===C&&t({className:"btn"})},[C,t]);const B="a"===i?"a":"button",S=(C||"").split(/\s+/).filter(Boolean).some(e=>"btn"===e.toLowerCase()),I=e=>0===Object.keys(e||{}).length,k=s(_,"data-"),P=s(x,"aria-"),A=(0,o.safeHTML)(u||""),L=(0,n.useBlockProps)({...k,...P,..."a"===i&&c?{href:c}:{},..."a"===i&&d?{role:d}:{},..."a"===i&&Number.isInteger(b)?{tabIndex:b}:{},..."a"===i?{onClick:e=>e.preventDefault()}:{},..."button"===i&&h?{autoFocus:!0}:{},..."button"===i&&f?{disabled:!0}:{},..."button"===i&&g?{form:g}:{},..."button"===i&&v?{formEncType:v}:{},..."button"===i&&T?{formMethod:T}:{},..."button"===i&&j?{formNoValidate:!0}:{},..."button"===i&&z?{formTarget:z}:{},..."button"===i&&w?{name:w}:{},..."button"===i&&y?{type:y}:{},..."button"===i&&D?{value:D}:{}}),N=[{label:(0,a.__)("Default","rundizstrap-companion"),value:""},{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"},{label:"multipart/form-data",value:"multipart/form-data"},{label:"text/plain",value:"text/plain"}],V=[{label:(0,a.__)("Default","rundizstrap-companion"),value:""},{label:"get",value:"get"},{label:"post",value:"post"},{label:"dialog",value:"dialog"}];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(n.InspectorControls,{children:["a"===i&&!c&&(0,m.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,m.jsx)(l.Notice,{status:"warning",isDismissible:!1,children:(0,a.__)("Please add an href value when using <a>.","rundizstrap-companion")})}),!S&&(0,m.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,m.jsx)(l.Notice,{status:"warning",isDismissible:!1,children:(0,a.__)('Please ensure the CSS class list contains the Bootstrap class "btn".',"rundizstrap-companion")})}),(0,m.jsxs)(l.__experimentalToolsPanel,{label:(0,a.__)("Button Settings","rundizstrap-companion"),resetAll:()=>t({tagName:"button",textHtml:""}),children:[(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>"button"!==i,label:(0,a.__)("Tag Name","rundizstrap-companion"),onDeselect:()=>t({tagName:"button"}),isShownByDefault:!0,children:(0,m.jsx)(l.SelectControl,{label:(0,a.__)("Tag Name","rundizstrap-companion"),value:i,options:[{label:"<button>",value:"button"},{label:"<a>",value:"a"}],onChange:e=>t({tagName:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==u,label:(0,a.__)("Button text/HTML","rundizstrap-companion"),onDeselect:()=>t({textHtml:""}),isShownByDefault:!0,children:(0,m.jsx)(l.TextControl,{label:(0,a.__)("Button text/HTML","rundizstrap-companion"),value:u,onChange:e=>t({textHtml:e}),help:(0,a.__)('You can use text or HTML, e.g. <i class="bi bi-save"></i> Save',"rundizstrap-companion")})})]}),"a"===i&&(0,m.jsxs)(l.__experimentalToolsPanel,{label:(0,a.__)("Link Attributes","rundizstrap-companion"),resetAll:()=>t({href:"",linkRole:"",linkTabIndex:void 0}),children:[(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==c,label:(0,a._x)("Href","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({href:""}),isShownByDefault:!0,children:(0,m.jsx)(l.TextControl,{label:(0,a._x)("Href","HTML attribute","rundizstrap-companion"),value:c,onChange:e=>t({href:e}),help:(0,a.__)("Required when using <a>.","rundizstrap-companion")})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==d,label:(0,a._x)("Role","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({linkRole:""}),isShownByDefault:!0,children:(0,m.jsx)(l.TextControl,{label:(0,a._x)("Role","HTML attribute","rundizstrap-companion"),value:d,onChange:e=>t({linkRole:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>Number.isInteger(b),label:(0,a.__)("Tab index","rundizstrap-companion"),onDeselect:()=>t({linkTabIndex:void 0}),isShownByDefault:!0,children:(0,m.jsx)(l.TextControl,{type:"number",label:(0,a.__)("Tab index","rundizstrap-companion"),value:Number.isInteger(b)?b:"",onChange:e=>{if(""===e)return void t({linkTabIndex:void 0});const a=Number(e);Number.isInteger(a)&&t({linkTabIndex:a})}})})]}),"button"===i&&(0,m.jsxs)(l.__experimentalToolsPanel,{label:(0,a.__)("Button Attributes","rundizstrap-companion"),resetAll:()=>t({autofocus:!1,disabled:!1,form:"",formenctype:"",formmethod:"",formnovalidate:!1,formtarget:"",name:"",type:"button",value:""}),children:[(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>h,label:(0,a._x)("Autofocus","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({autofocus:!1}),isShownByDefault:!0,children:(0,m.jsx)(l.ToggleControl,{checked:h,label:(0,a._x)("Autofocus","HTML attribute","rundizstrap-companion"),onChange:e=>t({autofocus:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>f,label:(0,a._x)("Disabled","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({disabled:!1}),isShownByDefault:!0,children:(0,m.jsx)(l.ToggleControl,{checked:f,label:(0,a._x)("Disabled","HTML attribute","rundizstrap-companion"),onChange:e=>t({disabled:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==g,label:(0,a.__)("Form ID","rundizstrap-companion"),onDeselect:()=>t({form:""}),isShownByDefault:!0,children:(0,m.jsx)(l.TextControl,{label:(0,a.__)("Form ID","rundizstrap-companion"),value:g,onChange:e=>t({form:e}),help:(0,m.jsxs)(m.Fragment,{children:[(0,a.__)("ID of the form this button is associated with.","rundizstrap-companion")," ",(0,m.jsx)(l.ExternalLink,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/button",children:(0,a.__)("Learn more","rundizstrap-companion")})]})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==v,label:(0,a.__)("Form enctype","rundizstrap-companion"),onDeselect:()=>t({formenctype:""}),isShownByDefault:!0,children:(0,m.jsx)(l.SelectControl,{label:(0,a.__)("Form enctype","rundizstrap-companion"),value:v,options:N,onChange:e=>t({formenctype:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==T,label:(0,a.__)("Form method","rundizstrap-companion"),onDeselect:()=>t({formmethod:""}),isShownByDefault:!0,children:(0,m.jsx)(l.SelectControl,{label:(0,a.__)("Form method","rundizstrap-companion"),value:T,options:V,onChange:e=>t({formmethod:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>j,label:(0,a.__)("Form novalidate","rundizstrap-companion"),onDeselect:()=>t({formnovalidate:!1}),isShownByDefault:!0,children:(0,m.jsx)(l.ToggleControl,{checked:j,label:(0,a.__)("Form novalidate","rundizstrap-companion"),onChange:e=>t({formnovalidate:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==z,label:(0,a.__)("Form target","rundizstrap-companion"),onDeselect:()=>t({formtarget:""}),isShownByDefault:!0,children:(0,m.jsx)(l.TextControl,{label:(0,a.__)("Form target","rundizstrap-companion"),value:z,onChange:e=>t({formtarget:e}),help:(0,a.__)("Target for form submission, e.g. _blank.","rundizstrap-companion")})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==w,label:(0,a._x)("Name","Button name","rundizstrap-companion"),onDeselect:()=>t({name:""}),isShownByDefault:!0,children:(0,m.jsx)(l.TextControl,{label:(0,a._x)("Name","Button name","rundizstrap-companion"),value:w,onChange:e=>t({name:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>"button"!==y,label:(0,a._x)("Type","Button type","rundizstrap-companion"),onDeselect:()=>t({type:"button"}),isShownByDefault:!0,children:(0,m.jsx)(l.SelectControl,{label:(0,a._x)("Type","Button type","rundizstrap-companion"),value:y,options:[{label:"button",value:"button"},{label:"submit",value:"submit"},{label:"reset",value:"reset"}],onChange:e=>t({type:e})})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>""!==D,label:(0,a._x)("Value","Button value","rundizstrap-companion"),onDeselect:()=>t({value:""}),isShownByDefault:!0,children:(0,m.jsx)(l.TextControl,{label:(0,a._x)("Value","Button value","rundizstrap-companion"),value:D,onChange:e=>t({value:e})})})]}),(0,m.jsxs)(l.__experimentalToolsPanel,{label:(0,a.__)("Data and Aria Attributes","rundizstrap-companion"),resetAll:()=>t({dataAttributes:{},ariaAttributes:{}}),children:[(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>!I(_),label:(0,a.__)("Data attributes","rundizstrap-companion"),onDeselect:()=>t({dataAttributes:{}}),isShownByDefault:!0,children:(0,m.jsx)(p,{label:(0,a.__)("Data attributes","rundizstrap-companion")+" ",value:_,onChange:e=>t({dataAttributes:e}),prefix:"data-"})}),(0,m.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>!I(x),label:(0,a.__)("Aria attributes","rundizstrap-companion"),onDeselect:()=>t({ariaAttributes:{}}),isShownByDefault:!0,children:(0,m.jsx)(p,{label:(0,a.__)("Aria attributes","rundizstrap-companion")+" ",value:x,onChange:e=>t({ariaAttributes:e}),prefix:"aria-"})})]})]}),u?(0,m.jsx)(B,{...L,dangerouslySetInnerHTML:{__html:A}}):(0,m.jsx)(B,{...L})]})}})})();