(()=>{"use strict";const e=window.wp.blocks,t=JSON.parse('{"UU":"rundizstrap-companion/blocks-bs-button"}'),a=window.wp.i18n,n=window.wp.blockEditor,o=window.wp.components,l=window.wp.element,r=["data-","aria-"];function s(e,t=""){if(null==e)return"";let a=String(e).trim().toLowerCase();const n=String(t||"").toLowerCase();return a?(n&&a.startsWith(n)&&(a=a.slice(n.length)),a=a.replace(/[^a-z0-9_-]/g,""),a):""}function i(e){return null==e?"":String(e).replace(/[\r\n\t]/g," ").replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]/g,"").trim()}const u=window.ReactJSXRuntime;function m({label:e,value:t,onChange:n}){const r=t||{},[m,c]=(0,l.useState)([]);(0,l.useEffect)(()=>{const e=Object.entries(r).map(([e,t])=>({key:e,val:t}));c(e)},[t]);const p=e=>e.reduce((e,t)=>{const a=s(t.key);return a?(e[a]=i(t.val),e):e},{}),d=(e,t,a)=>{const o=[...m];o[e][t]=a,c(o);const l=o.map(e=>s(e.key)).filter(e=>""!==e);l.some((e,t)=>l.indexOf(e)!==t)||n(p(o))};return(0,u.jsxs)("div",{className:"components-base-control",children:[(0,u.jsx)("label",{className:"components-base-control__label",children:e}),m.map((e,t)=>(0,u.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,u.jsx)(o.TextControl,{placeholder:(0,a.__)("Key","rundizstrap-companion"),value:e.key,onChange:e=>d(t,"key",e)}),(0,u.jsx)(o.TextControl,{placeholder:(0,a.__)("Value","rundizstrap-companion"),value:e.val,onChange:e=>d(t,"val",e)}),(0,u.jsx)(o.Button,{size:"small",isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const t=m.filter((t,a)=>a!==e);c(t),n(p(t))})(t),label:(0,a.__)("Remove","rundizstrap-companion")})]},t)),(0,u.jsx)(o.Button,{variant:"secondary",onClick:()=>{const e=[...m,{key:"",val:""}];c(e)},size:"small",children:(0,a.__)("Add attribute","rundizstrap-companion")})]})}function c(e,t){const a={};if(!e)return a;const n=String(t||"").toLowerCase();return r.includes(n)?(Object.entries(e).forEach(([e,t])=>{const o=s(e,n);o&&(a[`${n}${o}`]=i(t))}),a):a}(0,e.registerBlockType)(t.UU,{edit:function({attributes:e,setAttributes:t}){const{tagName:r,textHtml:s,href:i,linkRole:p,linkTabIndex:d,dataAttributes:b,ariaAttributes:_,autofocus:x,disabled:h,form:f,formenctype:g,formmethod:v,formnovalidate:T,formtarget:j,name:z,type:y,value:w,className:D}=e;(0,l.useEffect)(()=>{void 0===D&&t({className:"btn"})},[D,t]);const C="a"===r?"a":"button",B=(D||"").split(/\s+/).filter(Boolean).some(e=>"btn"===e.toLowerCase()),I=e=>0===Object.keys(e||{}).length,S=c(b,"data-"),k=c(_,"aria-"),P=(0,n.useBlockProps)({...S,...k,..."a"===r&&i?{href:i}:{},..."a"===r&&p?{role:p}:{},..."a"===r&&Number.isInteger(d)?{tabIndex:d}:{},..."a"===r?{onClick:e=>e.preventDefault()}:{},..."button"===r&&x?{autoFocus:!0}:{},..."button"===r&&h?{disabled:!0}:{},..."button"===r&&f?{form:f}:{},..."button"===r&&g?{formEncType:g}:{},..."button"===r&&v?{formMethod:v}:{},..."button"===r&&T?{formNoValidate:!0}:{},..."button"===r&&j?{formTarget:j}:{},..."button"===r&&z?{name:z}:{},..."button"===r&&y?{type:y}:{},..."button"===r&&w?{value:w}:{}}),A=[{label:(0,a.__)("Default","rundizstrap-companion"),value:""},{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"},{label:"multipart/form-data",value:"multipart/form-data"},{label:"text/plain",value:"text/plain"}],N=[{label:(0,a.__)("Default","rundizstrap-companion"),value:""},{label:"get",value:"get"},{label:"post",value:"post"},{label:"dialog",value:"dialog"}];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(n.InspectorControls,{children:["a"===r&&!i&&(0,u.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,u.jsx)(o.Notice,{status:"warning",isDismissible:!1,children:(0,a.__)("Please add an href value when using <a>.","rundizstrap-companion")})}),!B&&(0,u.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,u.jsx)(o.Notice,{status:"warning",isDismissible:!1,children:(0,a.__)('Please ensure the CSS class list contains the Bootstrap class "btn".',"rundizstrap-companion")})}),(0,u.jsxs)(o.__experimentalToolsPanel,{label:(0,a.__)("Button Settings","rundizstrap-companion"),resetAll:()=>t({tagName:"button",textHtml:""}),children:[(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>"button"!==r,label:(0,a.__)("Tag Name","rundizstrap-companion"),onDeselect:()=>t({tagName:"button"}),isShownByDefault:!0,children:(0,u.jsx)(o.SelectControl,{label:(0,a.__)("Tag Name","rundizstrap-companion"),value:r,options:[{label:"<button>",value:"button"},{label:"<a>",value:"a"}],onChange:e=>t({tagName:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==s,label:(0,a.__)("Button text/HTML","rundizstrap-companion"),onDeselect:()=>t({textHtml:""}),isShownByDefault:!0,children:(0,u.jsx)(o.TextControl,{label:(0,a.__)("Button text/HTML","rundizstrap-companion"),value:s,onChange:e=>t({textHtml:e}),help:(0,a.__)('You can use text or HTML, e.g. <i class="bi bi-save"></i> Save',"rundizstrap-companion")})})]}),"a"===r&&(0,u.jsxs)(o.__experimentalToolsPanel,{label:(0,a.__)("Link Attributes","rundizstrap-companion"),resetAll:()=>t({href:"",linkRole:"",linkTabIndex:void 0}),children:[(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==i,label:(0,a._x)("Href","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({href:""}),isShownByDefault:!0,children:(0,u.jsx)(o.TextControl,{label:(0,a._x)("Href","HTML attribute","rundizstrap-companion"),value:i,onChange:e=>t({href:e}),help:(0,a.__)("Required when using <a>.","rundizstrap-companion")})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==p,label:(0,a._x)("Role","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({linkRole:""}),isShownByDefault:!0,children:(0,u.jsx)(o.TextControl,{label:(0,a._x)("Role","HTML attribute","rundizstrap-companion"),value:p,onChange:e=>t({linkRole:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>Number.isInteger(d),label:(0,a.__)("Tab index","rundizstrap-companion"),onDeselect:()=>t({linkTabIndex:void 0}),isShownByDefault:!0,children:(0,u.jsx)(o.TextControl,{type:"number",label:(0,a.__)("Tab index","rundizstrap-companion"),value:Number.isInteger(d)?d:"",onChange:e=>{if(""===e)return void t({linkTabIndex:void 0});const a=Number(e);Number.isInteger(a)&&t({linkTabIndex:a})}})})]}),"button"===r&&(0,u.jsxs)(o.__experimentalToolsPanel,{label:(0,a.__)("Button Attributes","rundizstrap-companion"),resetAll:()=>t({autofocus:!1,disabled:!1,form:"",formenctype:"",formmethod:"",formnovalidate:!1,formtarget:"",name:"",type:"button",value:""}),children:[(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>x,label:(0,a._x)("Autofocus","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({autofocus:!1}),isShownByDefault:!0,children:(0,u.jsx)(o.ToggleControl,{checked:x,label:(0,a._x)("Autofocus","HTML attribute","rundizstrap-companion"),onChange:e=>t({autofocus:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>h,label:(0,a._x)("Disabled","HTML attribute","rundizstrap-companion"),onDeselect:()=>t({disabled:!1}),isShownByDefault:!0,children:(0,u.jsx)(o.ToggleControl,{checked:h,label:(0,a._x)("Disabled","HTML attribute","rundizstrap-companion"),onChange:e=>t({disabled:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==f,label:(0,a.__)("Form ID","rundizstrap-companion"),onDeselect:()=>t({form:""}),isShownByDefault:!0,children:(0,u.jsx)(o.TextControl,{label:(0,a.__)("Form ID","rundizstrap-companion"),value:f,onChange:e=>t({form:e}),help:(0,u.jsxs)(u.Fragment,{children:[(0,a.__)("ID of the form this button is associated with.","rundizstrap-companion")," ",(0,u.jsx)(o.ExternalLink,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/button",children:(0,a.__)("Learn more","rundizstrap-companion")})]})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==g,label:(0,a.__)("Form enctype","rundizstrap-companion"),onDeselect:()=>t({formenctype:""}),isShownByDefault:!0,children:(0,u.jsx)(o.SelectControl,{label:(0,a.__)("Form enctype","rundizstrap-companion"),value:g,options:A,onChange:e=>t({formenctype:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==v,label:(0,a.__)("Form method","rundizstrap-companion"),onDeselect:()=>t({formmethod:""}),isShownByDefault:!0,children:(0,u.jsx)(o.SelectControl,{label:(0,a.__)("Form method","rundizstrap-companion"),value:v,options:N,onChange:e=>t({formmethod:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>T,label:(0,a.__)("Form novalidate","rundizstrap-companion"),onDeselect:()=>t({formnovalidate:!1}),isShownByDefault:!0,children:(0,u.jsx)(o.ToggleControl,{checked:T,label:(0,a.__)("Form novalidate","rundizstrap-companion"),onChange:e=>t({formnovalidate:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==j,label:(0,a.__)("Form target","rundizstrap-companion"),onDeselect:()=>t({formtarget:""}),isShownByDefault:!0,children:(0,u.jsx)(o.TextControl,{label:(0,a.__)("Form target","rundizstrap-companion"),value:j,onChange:e=>t({formtarget:e}),help:(0,a.__)("Target for form submission, e.g. _blank.","rundizstrap-companion")})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==z,label:(0,a._x)("Name","Button name","rundizstrap-companion"),onDeselect:()=>t({name:""}),isShownByDefault:!0,children:(0,u.jsx)(o.TextControl,{label:(0,a._x)("Name","Button name","rundizstrap-companion"),value:z,onChange:e=>t({name:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>"button"!==y,label:(0,a._x)("Type","Button type","rundizstrap-companion"),onDeselect:()=>t({type:"button"}),isShownByDefault:!0,children:(0,u.jsx)(o.SelectControl,{label:(0,a._x)("Type","Button type","rundizstrap-companion"),value:y,options:[{label:"button",value:"button"},{label:"submit",value:"submit"},{label:"reset",value:"reset"}],onChange:e=>t({type:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==w,label:(0,a.__)("Value","rundizstrap-companion"),onDeselect:()=>t({value:""}),isShownByDefault:!0,children:(0,u.jsx)(o.TextControl,{label:(0,a.__)("Value","rundizstrap-companion"),value:w,onChange:e=>t({value:e})})})]}),(0,u.jsxs)(o.__experimentalToolsPanel,{label:(0,a.__)("Data and Aria Attributes","rundizstrap-companion"),resetAll:()=>t({dataAttributes:{},ariaAttributes:{}}),children:[(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!I(b),label:(0,a.__)("Data attributes","rundizstrap-companion"),onDeselect:()=>t({dataAttributes:{}}),isShownByDefault:!0,children:(0,u.jsx)(m,{label:(0,a.__)("Data attributes","rundizstrap-companion")+" ",value:b,onChange:e=>t({dataAttributes:e})})}),(0,u.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!I(_),label:(0,a.__)("Aria attributes","rundizstrap-companion"),onDeselect:()=>t({ariaAttributes:{}}),isShownByDefault:!0,children:(0,u.jsx)(m,{label:(0,a.__)("Aria attributes","rundizstrap-companion")+" ",value:_,onChange:e=>t({ariaAttributes:e})})})]})]}),s?(0,u.jsx)(C,{...P,dangerouslySetInnerHTML:{__html:s}}):(0,u.jsx)(C,{...P})]})},save:function({attributes:e}){const{tagName:t,textHtml:a,href:o,linkRole:l,linkTabIndex:r,dataAttributes:s,ariaAttributes:i,autofocus:m,disabled:p,form:d,formenctype:b,formmethod:_,formnovalidate:x,formtarget:h,name:f,type:g,value:v}=e,T="a"===t?"a":"button",j={...{...n.useBlockProps.save(),...c(s,"data-"),...c(i,"aria-")},..."a"===t?{...o?{href:o}:{},...l?{role:l}:{},...Number.isInteger(r)?{tabIndex:r}:{}}:{},..."button"===t?{...m?{autoFocus:!0}:{},...p?{disabled:!0}:{},...d?{form:d}:{},...b?{formEncType:b}:{},..._?{formMethod:_}:{},...x?{formNoValidate:!0}:{},...h?{formTarget:h}:{},...f?{name:f}:{},...g?{type:g}:{},...v?{value:v}:{}}:{}};return a?(0,u.jsx)(T,{...j,dangerouslySetInnerHTML:{__html:a}}):(0,u.jsx)(T,{...j})}})})();