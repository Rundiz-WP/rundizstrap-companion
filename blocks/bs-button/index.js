(()=>{"use strict";const e=window.wp.blocks,l=JSON.parse('{"UU":"bbfse-plug/blocks-bs-button"}'),t=window.wp.i18n,a=window.wp.blockEditor,o=window.wp.components,n=window.wp.element,s=window.ReactJSXRuntime;function b({label:e,value:l,onChange:a}){const b=l||{},[r,u]=(0,n.useState)([]);(0,n.useEffect)(()=>{const e=Object.entries(b).map(([e,l])=>({key:e,val:l}));u(e)},[l]);const i=(e,l,t)=>{const o=[...r];o[e][l]=t,u(o);const n=o.map(e=>e.key);if(!n.some((e,l)=>n.indexOf(e)!==l)){const e=o.reduce((e,l)=>(l.key&&(e[l.key]=l.val),e),{});a(e)}};return(0,s.jsxs)("div",{className:"components-base-control",children:[(0,s.jsx)("label",{className:"components-base-control__label",children:e}),r.map((e,l)=>(0,s.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,s.jsx)(o.TextControl,{placeholder:(0,t.__)("Key","bbfse-plugin"),value:e.key,onChange:e=>i(l,"key",e)}),(0,s.jsx)(o.TextControl,{placeholder:(0,t.__)("Value","bbfse-plugin"),value:e.val,onChange:e=>i(l,"val",e)}),(0,s.jsx)(o.Button,{isSmall:!0,isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const l=r.filter((l,t)=>t!==e);u(l);const t=l.reduce((e,l)=>(l.key&&(e[l.key]=l.val),e),{});a(t)})(l),label:(0,t.__)("Remove","bbfse-plugin")})]},l)),(0,s.jsx)(o.Button,{variant:"secondary",onClick:()=>{const e=[...r,{key:"",val:""}];u(e)},isSmall:!0,children:(0,t.__)("Add attribute","bbfse-plugin")})]})}function r(e,l){const t={};return e&&Object.entries(e).forEach(([e,a])=>{e&&(t[`${l}${e}`]=a)}),t}(0,e.registerBlockType)(l.UU,{edit:function({attributes:e,setAttributes:l}){const{tagName:u,textHtml:i,href:m,linkRole:f,linkTabIndex:c,dataAttributes:p,ariaAttributes:_,autofocus:d,disabled:x,form:h,formenctype:g,formmethod:v,formnovalidate:T,formtarget:j,name:y,type:D,value:w,className:C}=e;(0,n.useEffect)(()=>{void 0===C&&l({className:"btn"})},[C,l]);const k="a"===u?"a":"button",B=(C||"").split(/\s+/).filter(Boolean).some(e=>"btn"===e.toLowerCase()),S=e=>0===Object.keys(e||{}).length,I=r(p,"data-"),P=r(_,"aria-"),A=(0,a.useBlockProps)({...I,...P,..."a"===u&&m?{href:m}:{},..."a"===u&&f?{role:f}:{},..."a"===u&&c?{tabIndex:c}:{},..."a"===u?{onClick:e=>e.preventDefault()}:{},..."button"===u&&d?{autoFocus:!0}:{},..."button"===u&&x?{disabled:!0}:{},..."button"===u&&h?{form:h}:{},..."button"===u&&g?{formEncType:g}:{},..."button"===u&&v?{formMethod:v}:{},..."button"===u&&T?{formNoValidate:!0}:{},..."button"===u&&j?{formTarget:j}:{},..."button"===u&&y?{name:y}:{},..."button"===u&&D?{type:D}:{},..."button"===u&&w?{value:w}:{}}),V=[{label:(0,t.__)("Default","bbfse-plug"),value:""},{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"},{label:"multipart/form-data",value:"multipart/form-data"},{label:"text/plain",value:"text/plain"}],H=[{label:(0,t.__)("Default","bbfse-plug"),value:""},{label:"get",value:"get"},{label:"post",value:"post"},{label:"dialog",value:"dialog"}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.InspectorControls,{children:["a"===u&&!m&&(0,s.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,s.jsx)(o.Notice,{status:"warning",isDismissible:!1,children:(0,t.__)("Please add an href value when using <a>.","bbfse-plug")})}),!B&&(0,s.jsx)("div",{style:{padding:"0 16px",marginBottom:"16px"},children:(0,s.jsx)(o.Notice,{status:"warning",isDismissible:!1,children:(0,t.__)('Please ensure the CSS class list contains the Bootstrap class "btn".',"bbfse-plug")})}),(0,s.jsxs)(o.__experimentalToolsPanel,{label:(0,t.__)("Button Settings","bbfse-plug"),resetAll:()=>l({tagName:"button",textHtml:""}),children:[(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>"button"!==u,label:(0,t.__)("Tag Name","bbfse-plug"),onDeselect:()=>l({tagName:"button"}),isShownByDefault:!0,children:(0,s.jsx)(o.SelectControl,{label:(0,t.__)("Tag Name","bbfse-plug"),value:u,options:[{label:"<button>",value:"button"},{label:"<a>",value:"a"}],onChange:e=>l({tagName:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==i,label:(0,t.__)("Button text/HTML","bbfse-plug"),onDeselect:()=>l({textHtml:""}),isShownByDefault:!0,children:(0,s.jsx)(o.TextControl,{label:(0,t.__)("Button text/HTML","bbfse-plug"),value:i,onChange:e=>l({textHtml:e}),help:(0,t.__)('You can use text or HTML, e.g. <i class="bi bi-save"></i> Save',"bbfse-plug")})})]}),"a"===u&&(0,s.jsxs)(o.__experimentalToolsPanel,{label:(0,t.__)("Link Attributes","bbfse-plug"),resetAll:()=>l({href:"",linkRole:"",linkTabIndex:""}),children:[(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==m,label:(0,t._x)("Href","HTML attribute","bbfse-plug"),onDeselect:()=>l({href:""}),isShownByDefault:!0,children:(0,s.jsx)(o.TextControl,{label:(0,t._x)("Href","HTML attribute","bbfse-plug"),value:m,onChange:e=>l({href:e}),help:(0,t.__)("Required when using <a>.","bbfse-plug")})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==f,label:(0,t._x)("Role","HTML attribute","bbfse-plug"),onDeselect:()=>l({linkRole:""}),isShownByDefault:!0,children:(0,s.jsx)(o.TextControl,{label:(0,t._x)("Role","HTML attribute","bbfse-plug"),value:f,onChange:e=>l({linkRole:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==c,label:(0,t.__)("Tab index","bbfse-plug"),onDeselect:()=>l({linkTabIndex:""}),isShownByDefault:!0,children:(0,s.jsx)(o.TextControl,{label:(0,t.__)("Tab index","bbfse-plug"),value:c,onChange:e=>l({linkTabIndex:e})})})]}),"button"===u&&(0,s.jsxs)(o.__experimentalToolsPanel,{label:(0,t.__)("Button Attributes","bbfse-plug"),resetAll:()=>l({autofocus:!1,disabled:!1,form:"",formenctype:"",formmethod:"",formnovalidate:!1,formtarget:"",name:"",type:"button",value:""}),children:[(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>d,label:(0,t._x)("Autofocus","HTML attribute","bbfse-plug"),onDeselect:()=>l({autofocus:!1}),isShownByDefault:!0,children:(0,s.jsx)(o.ToggleControl,{checked:d,label:(0,t._x)("Autofocus","HTML attribute","bbfse-plug"),onChange:e=>l({autofocus:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>x,label:(0,t._x)("Disabled","HTML attribute","bbfse-plug"),onDeselect:()=>l({disabled:!1}),isShownByDefault:!0,children:(0,s.jsx)(o.ToggleControl,{checked:x,label:(0,t._x)("Disabled","HTML attribute","bbfse-plug"),onChange:e=>l({disabled:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==h,label:(0,t.__)("Form ID","bbfse-plug"),onDeselect:()=>l({form:""}),isShownByDefault:!0,children:(0,s.jsx)(o.TextControl,{label:(0,t.__)("Form ID","bbfse-plug"),value:h,onChange:e=>l({form:e}),help:(0,s.jsxs)(s.Fragment,{children:[(0,t.__)("ID of the form this button is associated with.","bbfse-plug")," ",(0,s.jsx)(o.ExternalLink,{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/button",children:(0,t.__)("Learn more","bbfse-plug")})]})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==g,label:(0,t.__)("Form enctype","bbfse-plug"),onDeselect:()=>l({formenctype:""}),isShownByDefault:!0,children:(0,s.jsx)(o.SelectControl,{label:(0,t.__)("Form enctype","bbfse-plug"),value:g,options:V,onChange:e=>l({formenctype:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==v,label:(0,t.__)("Form method","bbfse-plug"),onDeselect:()=>l({formmethod:""}),isShownByDefault:!0,children:(0,s.jsx)(o.SelectControl,{label:(0,t.__)("Form method","bbfse-plug"),value:v,options:H,onChange:e=>l({formmethod:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>T,label:(0,t.__)("Form novalidate","bbfse-plug"),onDeselect:()=>l({formnovalidate:!1}),isShownByDefault:!0,children:(0,s.jsx)(o.ToggleControl,{checked:T,label:(0,t.__)("Form novalidate","bbfse-plug"),onChange:e=>l({formnovalidate:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==j,label:(0,t.__)("Form target","bbfse-plug"),onDeselect:()=>l({formtarget:""}),isShownByDefault:!0,children:(0,s.jsx)(o.TextControl,{label:(0,t.__)("Form target","bbfse-plug"),value:j,onChange:e=>l({formtarget:e}),help:(0,t.__)("Target for form submission, e.g. _blank.","bbfse-plug")})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==y,label:(0,t._x)("Name","Button name","bbfse-plug"),onDeselect:()=>l({name:""}),isShownByDefault:!0,children:(0,s.jsx)(o.TextControl,{label:(0,t._x)("Name","Button name","bbfse-plug"),value:y,onChange:e=>l({name:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>"button"!==D,label:(0,t._x)("Type","Button type","bbfse-plug"),onDeselect:()=>l({type:"button"}),isShownByDefault:!0,children:(0,s.jsx)(o.SelectControl,{label:(0,t._x)("Type","Button type","bbfse-plug"),value:D,options:[{label:"button",value:"button"},{label:"submit",value:"submit"},{label:"reset",value:"reset"}],onChange:e=>l({type:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>""!==w,label:(0,t.__)("Value","bbfse-plug"),onDeselect:()=>l({value:""}),isShownByDefault:!0,children:(0,s.jsx)(o.TextControl,{label:(0,t.__)("Value","bbfse-plug"),value:w,onChange:e=>l({value:e})})})]}),(0,s.jsxs)(o.__experimentalToolsPanel,{label:(0,t.__)("Data and Aria Attributes","bbfse-plug"),resetAll:()=>l({dataAttributes:{},ariaAttributes:{}}),children:[(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!S(p),label:(0,t.__)("Data attributes","bbfse-plug"),onDeselect:()=>l({dataAttributes:{}}),isShownByDefault:!0,children:(0,s.jsx)(b,{label:(0,t.__)("Data attributes","bbfse-plug")+" ",value:p,onChange:e=>l({dataAttributes:e})})}),(0,s.jsx)(o.__experimentalToolsPanelItem,{hasValue:()=>!S(_),label:(0,t.__)("Aria attributes","bbfse-plug"),onDeselect:()=>l({ariaAttributes:{}}),isShownByDefault:!0,children:(0,s.jsx)(b,{label:(0,t.__)("Aria attributes","bbfse-plug")+" ",value:_,onChange:e=>l({ariaAttributes:e})})})]})]}),i?(0,s.jsx)(k,{...A,dangerouslySetInnerHTML:{__html:i}}):(0,s.jsx)(k,{...A})]})},save:function({attributes:e}){const{tagName:l,textHtml:t,href:o,linkRole:n,linkTabIndex:b,dataAttributes:u,ariaAttributes:i,autofocus:m,disabled:f,form:c,formenctype:p,formmethod:_,formnovalidate:d,formtarget:x,name:h,type:g,value:v}=e,T="a"===l?"a":"button",j={...{...a.useBlockProps.save(),...r(u,"data-"),...r(i,"aria-")},..."a"===l?{...o?{href:o}:{},...n?{role:n}:{},...b?{tabIndex:b}:{}}:{},..."button"===l?{...m?{autoFocus:!0}:{},...f?{disabled:!0}:{},...c?{form:c}:{},...p?{formEncType:p}:{},..._?{formMethod:_}:{},...d?{formNoValidate:!0}:{},...x?{formTarget:x}:{},...h?{name:h}:{},...g?{type:g}:{},...v?{value:v}:{}}:{}};return t?(0,s.jsx)(T,{...j,dangerouslySetInnerHTML:{__html:t}}):(0,s.jsx)(T,{...j})}})})();