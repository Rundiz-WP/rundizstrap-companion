(()=>{"use strict";const e=window.wp.blocks,a=JSON.parse('{"UU":"rundizstrap-companion/blocks-bs-navbar-navigation"}'),n=window.wp.i18n,t=window.wp.blockEditor,i=window.wp.components,s=window.wp.url,r=window.wp.data,o=window.wp.coreData,l=window.wp.htmlEntities,p=window.wp.serverSideRender,c=window.wp.element;function d(e,a=""){if(null==e)return"";let n=String(e).trim().toLowerCase();const t=String(a||"").toLowerCase();return n?(t&&n.startsWith(t)&&(n=n.slice(t.length)),n="aria-"===t||"aria"===t?n.replace(/[^a-z0-9_-]/g,""):n.replace(/[^a-z0-9._:-]/g,""),n):""}const u=window.ReactJSXRuntime;function m({label:e,value:a,onChange:t,prefix:s=""}){const r=a||{},[o,l]=(0,c.useState)([]);(0,c.useEffect)(()=>{const e=Object.entries(r).map(([e,a])=>({key:e,val:a}));l(e)},[a]);const p=e=>e.reduce((e,a)=>{const n=d(a.key,s);return n?(e[n]=function(e){return null==e?"":String(e).replace(/[\r\n\t]/g," ").replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\u007F]/g,"").trim()}(a.val),e):e},{}),m=(e,a,n)=>{const i=[...o];i[e][a]=n,l(i);const r=i.map(e=>d(e.key,s)).filter(e=>""!==e);r.some((e,a)=>r.indexOf(e)!==a)||t(p(i))};return(0,u.jsxs)("div",{className:"components-base-control",children:[(0,u.jsx)("label",{className:"components-base-control__label",children:e}),o.map((e,a)=>(0,u.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,u.jsx)(i.TextControl,{placeholder:(0,n.__)("Key","rundizstrap-companion"),value:e.key,onChange:e=>m(a,"key",e)}),(0,u.jsx)(i.TextControl,{placeholder:(0,n.__)("Value","rundizstrap-companion"),value:e.val,onChange:e=>m(a,"val",e)}),(0,u.jsx)(i.Button,{size:"small",isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const a=o.filter((a,n)=>n!==e);l(a),t(p(a))})(a),label:(0,n.__)("Remove","rundizstrap-companion")})]},a)),(0,u.jsx)(i.Button,{variant:"secondary",onClick:()=>{const e=[...o,{key:"",val:""}];l(e)},size:"small",children:(0,n.__)("Add attribute","rundizstrap-companion")})]})}function h(e,a=""){if("string"!=typeof e)return e;let n=e.replace(/%[a-fA-F0-9][a-fA-F0-9]/g,"");return n=n.replace(/[^A-Za-z0-9_-]/g,""),""===n&&a?h(a):n}function _(e,a=!1){const n="string"==typeof e?e:"",t=/\s$/.test(n),i=n.split(/\s+/).map(e=>h(e)).filter(e=>""!==e).join(" ");return a&&t&&""!==i?i+" ":i}(0,e.registerBlockType)(a.UU,{icon:{src:(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-compass",viewBox:"0 0 16 16",children:[(0,u.jsx)("path",{d:"M8 16.016a7.5 7.5 0 0 0 1.962-14.74A1 1 0 0 0 9 0H7a1 1 0 0 0-.962 1.276A7.5 7.5 0 0 0 8 16.016m6.5-7.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"}),(0,u.jsx)("path",{d:"m6.94 7.44 4.95-2.83-2.83 4.95-4.949 2.83 2.828-4.95z"})]})},edit:function({attributes:e,setAttributes:c}){const{navigationRef:d,dataAttributes:h,ariaAttributes:w,dropdownClassName:g}=e,v=(0,s.addQueryArgs)("post-new.php",{post_type:"wp_navigation"}),x=(0,s.addQueryArgs)("site-editor.php",{postType:"wp_navigation"}),b={per_page:-1,status:"publish"},f=(0,r.useSelect)(e=>e(o.store).getEntityRecords("postType","wp_navigation",b),[]),j=[{label:(0,n.__)("Auto: first available","rundizstrap-companion"),value:0}];Array.isArray(f)&&f.forEach(e=>{const a=e?.title?.rendered?(0,l.decodeEntities)(e.title.rendered):(0,n.__)("(no title)","rundizstrap-companion");j.push({label:a,value:e.id})});const y=(0,t.useBlockProps)({className:"navbar-nav"}),z=e=>0===Object.keys(e||{}).length;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(t.InspectorControls,{children:(0,u.jsxs)(i.__experimentalToolsPanel,{label:(0,n.__)("Navigation Settings","rundizstrap-companion"),resetAll:()=>c({navigationRef:0,dataAttributes:{},ariaAttributes:{},dropdownClassName:""}),children:[(0,u.jsxs)(i.__experimentalToolsPanelItem,{hasValue:()=>0!==d,label:(0,n.__)("Navigation","rundizstrap-companion"),onDeselect:()=>c({navigationRef:0}),isShownByDefault:!0,children:[null===f&&(0,u.jsx)(i.Spinner,{}),null!==f&&(0,u.jsx)(i.SelectControl,{label:(0,n.__)("Navigation","rundizstrap-companion"),value:d,options:j,onChange:e=>c({navigationRef:parseInt(e,10)||0}),help:(0,n.__)("Select a Navigation post or leave auto to use the first available.","rundizstrap-companion")}),(0,u.jsx)("div",{children:(0,u.jsx)(i.ExternalLink,{href:v,children:(0,n.__)("Create a new navigation","rundizstrap-companion")})}),(0,u.jsx)("div",{children:(0,u.jsx)(i.ExternalLink,{href:x,children:(0,n.__)("Manage all navigations","rundizstrap-companion")})}),Array.isArray(f)&&0===f.length&&(0,u.jsx)(i.Notice,{status:"warning",isDismissible:!1,children:(0,n.__)("No Navigation posts found. Create one in the Site Editor > Navigation.","rundizstrap-companion")})]}),(0,u.jsx)(i.__experimentalToolsPanelItem,{hasValue:()=>!z(h),label:(0,n.__)("Data attributes","rundizstrap-companion"),onDeselect:()=>c({dataAttributes:{}}),isShownByDefault:!0,children:(0,u.jsx)(m,{label:(0,n.__)("Data attributes","rundizstrap-companion")+" ",value:h,onChange:e=>c({dataAttributes:e}),prefix:"data-"})}),(0,u.jsx)(i.__experimentalToolsPanelItem,{hasValue:()=>!z(w),label:(0,n.__)("Aria attributes","rundizstrap-companion"),onDeselect:()=>c({ariaAttributes:{}}),isShownByDefault:!0,children:(0,u.jsx)(m,{label:(0,n.__)("Aria attributes","rundizstrap-companion")+" ",value:w,onChange:e=>c({ariaAttributes:e}),prefix:"aria-"})}),(0,u.jsx)(i.__experimentalToolsPanelItem,{hasValue:()=>!!g,label:(0,n.__)("Dropdown menu class","rundizstrap-companion"),onDeselect:()=>c({dropdownClassName:""}),isShownByDefault:!0,children:(0,u.jsx)(i.TextControl,{label:(0,n.__)("Dropdown menu class","rundizstrap-companion"),value:g,onChange:e=>c({dropdownClassName:_(e,!0)}),help:(0,n.__)("Additional classes for dropdown menu. The base class `dropdown-menu` is always applied.","rundizstrap-companion")})})]})}),(0,u.jsx)("div",{...y,children:Array.isArray(f)&&0===f.length?(0,u.jsx)("div",{className:"nav-item",children:(0,u.jsx)("span",{className:"nav-link",children:(0,n.__)("No Navigation posts found to preview.","rundizstrap-companion")})}):(0,u.jsx)(i.Disabled,{children:(0,u.jsx)(p,{block:a.UU,attributes:e})})})]})}})})();