(()=>{"use strict";const e=window.wp.blocks,a=JSON.parse('{"UU":"bbfse-plugin/blocks-bs-navbar-navigation"}'),s=window.wp.i18n,n=window.wp.blockEditor,t=window.wp.components,l=window.wp.url,i=window.wp.data,o=window.wp.coreData,r=window.wp.element,p=window.wp.htmlEntities,b=window.wp.serverSideRender,d=window.ReactJSXRuntime,u=({label:e,value:a,onChange:n})=>{const l=a||{},[i,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=Object.entries(l).map(([e,a])=>({key:e,val:a}));o(e)},[a]);const p=(e,a,s)=>{const t=[...i];t[e][a]=s,o(t);const l=t.map(e=>e.key);if(!l.some((e,a)=>l.indexOf(e)!==a)){const e=t.reduce((e,a)=>(a.key&&(e[a.key]=a.val),e),{});n(e)}};return(0,d.jsxs)("div",{className:"components-base-control",children:[(0,d.jsx)("label",{className:"components-base-control__label",children:e}),i.map((e,a)=>(0,d.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,d.jsx)(t.TextControl,{placeholder:(0,s.__)("Key","bbfse-plugin"),value:e.key,onChange:e=>p(a,"key",e)}),(0,d.jsx)(t.TextControl,{placeholder:(0,s.__)("Value","bbfse-plugin"),value:e.val,onChange:e=>p(a,"val",e)}),(0,d.jsx)(t.Button,{isSmall:!0,isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const a=i.filter((a,s)=>s!==e);o(a);const s=a.reduce((e,a)=>(a.key&&(e[a.key]=a.val),e),{});n(s)})(a),label:(0,s.__)("Remove","bbfse-plugin")})]},a)),(0,d.jsx)(t.Button,{variant:"secondary",onClick:()=>{const e=[...i,{key:"",val:""}];o(e)},isSmall:!0,children:(0,s.__)("Add attribute","bbfse-plugin")})]})};(0,e.registerBlockType)(a.UU,{icon:{src:(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-compass",viewBox:"0 0 16 16",children:[(0,d.jsx)("path",{d:"M8 16.016a7.5 7.5 0 0 0 1.962-14.74A1 1 0 0 0 9 0H7a1 1 0 0 0-.962 1.276A7.5 7.5 0 0 0 8 16.016m6.5-7.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0"}),(0,d.jsx)("path",{d:"m6.94 7.44 4.95-2.83-2.83 4.95-4.949 2.83 2.828-4.95z"})]})},edit:function({attributes:e,setAttributes:r}){const{navigationRef:c,dataAttributes:g,ariaAttributes:h,dropdownClassName:_}=e,w=(0,l.addQueryArgs)("post-new.php",{post_type:"wp_navigation"}),v=(0,l.addQueryArgs)("site-editor.php",{postType:"wp_navigation"}),x={per_page:-1,status:"publish"},f=(0,i.useSelect)(e=>e(o.store).getEntityRecords("postType","wp_navigation",x),[]),m=[{label:(0,s.__)("Auto: first available","bbfse-plugin"),value:0}];Array.isArray(f)&&f.forEach(e=>{const a=e?.title?.rendered?(0,p.decodeEntities)(e.title.rendered):(0,s.__)("(no title)","bbfse-plugin");m.push({label:a,value:e.id})});const j=(0,n.useBlockProps)({className:"navbar-nav"}),y=e=>0===Object.keys(e||{}).length;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.InspectorControls,{children:(0,d.jsxs)(t.__experimentalToolsPanel,{label:(0,s.__)("Navigation Settings","bbfse-plugin"),resetAll:()=>r({navigationRef:0,dataAttributes:{},ariaAttributes:{},dropdownClassName:""}),children:[(0,d.jsxs)(t.__experimentalToolsPanelItem,{hasValue:()=>0!==c,label:(0,s.__)("Navigation","bbfse-plugin"),onDeselect:()=>r({navigationRef:0}),isShownByDefault:!0,children:[null===f&&(0,d.jsx)(t.Spinner,{}),null!==f&&(0,d.jsx)(t.SelectControl,{label:(0,s.__)("Navigation","bbfse-plugin"),value:c,options:m,onChange:e=>r({navigationRef:parseInt(e,10)||0}),help:(0,s.__)("Select a Navigation post or leave auto to use the first available.","bbfse-plugin")}),(0,d.jsx)("div",{children:(0,d.jsx)(t.ExternalLink,{href:w,children:(0,s.__)("Create a new navigation","bbfse-plugin")})}),(0,d.jsx)("div",{children:(0,d.jsx)(t.ExternalLink,{href:v,children:(0,s.__)("Manage all navigations","bbfse-plugin")})}),Array.isArray(f)&&0===f.length&&(0,d.jsx)(t.Notice,{status:"warning",isDismissible:!1,children:(0,s.__)("No Navigation posts found. Create one in the Site Editor > Navigation.","bbfse-plugin")})]}),(0,d.jsx)(t.__experimentalToolsPanelItem,{hasValue:()=>!y(g),label:(0,s.__)("Data attributes","bbfse-plugin"),onDeselect:()=>r({dataAttributes:{}}),isShownByDefault:!0,children:(0,d.jsx)(u,{label:(0,s.__)("Data attributes","bbfse-plugin")+" ",value:g,onChange:e=>r({dataAttributes:e})})}),(0,d.jsx)(t.__experimentalToolsPanelItem,{hasValue:()=>!y(h),label:(0,s.__)("Aria attributes","bbfse-plugin"),onDeselect:()=>r({ariaAttributes:{}}),isShownByDefault:!0,children:(0,d.jsx)(u,{label:(0,s.__)("Aria attributes","bbfse-plugin")+" ",value:h,onChange:e=>r({ariaAttributes:e})})}),(0,d.jsx)(t.__experimentalToolsPanelItem,{hasValue:()=>!!_,label:(0,s.__)("Dropdown menu class","bbfse-plugin"),onDeselect:()=>r({dropdownClassName:""}),isShownByDefault:!0,children:(0,d.jsx)(t.TextControl,{label:(0,s.__)("Dropdown menu class","bbfse-plugin"),value:_,onChange:e=>r({dropdownClassName:e}),help:(0,s.__)("Additional classes for dropdown menu. The base class `dropdown-menu` is always applied.","bbfse-plugin")})})]})}),(0,d.jsx)("div",{...j,children:Array.isArray(f)&&0===f.length?(0,d.jsx)("div",{className:"nav-item",children:(0,d.jsx)("span",{className:"nav-link",children:(0,s.__)("No Navigation posts found to preview.","bbfse-plugin")})}):(0,d.jsx)(t.Disabled,{children:(0,d.jsx)(b,{block:a.UU,attributes:e})})})]})}})})();