(()=>{"use strict";const e=window.wp.i18n,t=window.wp.blocks,l=JSON.parse('{"UU":"bbfse-plugin/blocks-bs-post-navigation-link"}'),n=window.wp.blockEditor,s=window.wp.components,a=window.wp.data,i=window.wp.coreData,o=window.wp.element,r=window.ReactJSXRuntime;function b({label:t,value:l,onChange:n}){const a=l||{},[i,b]=(0,o.useState)([]);(0,o.useEffect)(()=>{const e=Object.entries(a).map(([e,t])=>({key:e,val:t}));b(e)},[l]);const p=(e,t,l)=>{const s=[...i];s[e][t]=l,b(s);const a=s.map(e=>e.key);if(!a.some((e,t)=>a.indexOf(e)!==t)){const e=s.reduce((e,t)=>(t.key&&(e[t.key]=t.val),e),{});n(e)}};return(0,r.jsxs)("div",{className:"components-base-control",children:[(0,r.jsx)("label",{className:"components-base-control__label",children:t}),i.map((t,l)=>(0,r.jsxs)("div",{style:{display:"flex",marginBottom:"5px",gap:"5px"},children:[(0,r.jsx)(s.TextControl,{placeholder:(0,e.__)("Key","bbfse-plugin"),value:t.key,onChange:e=>p(l,"key",e)}),(0,r.jsx)(s.TextControl,{placeholder:(0,e.__)("Value","bbfse-plugin"),value:t.val,onChange:e=>p(l,"val",e)}),(0,r.jsx)(s.Button,{isSmall:!0,isDestructive:!0,variant:"secondary",icon:"trash",onClick:()=>(e=>{const t=i.filter((t,l)=>l!==e);b(t);const l=t.reduce((e,t)=>(t.key&&(e[t.key]=t.val),e),{});n(l)})(l),label:(0,e.__)("Remove","bbfse-plugin")})]},l)),(0,r.jsx)(s.Button,{variant:"secondary",onClick:()=>{const e=[...i,{key:"",val:""}];b(e)},isSmall:!0,children:(0,e.__)("Add attribute","bbfse-plugin")})]})}function p(e,t){const l={};return e&&Object.entries(e).forEach(([e,n])=>{e&&(l[`${t}${e}`]=n)}),l}const u=(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-left",viewBox:"0 0 16 16",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M3.646 8.354a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L4.707 8l3.647 3.646a.5.5 0 0 1-.708.708z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M7.646 8.354a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L8.707 8l3.647 3.646a.5.5 0 0 1-.708.708z"})]}),c=(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-chevron-double-right",viewBox:"0 0 16 16",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M12.354 8.354a.5.5 0 0 0 0-.708l-4-4a.5.5 0 1 0-.708.708L11.293 8l-3.647 3.646a.5.5 0 0 0 .708.708z"}),(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.354 8.354a.5.5 0 0 0 0-.708l-4-4a.5.5 0 1 0-.708.708L7.293 8l-3.647 3.646a.5.5 0 0 0 .708.708z"})]}),x=[{name:"post-previous",title:(0,e.__)("Bootstrap Previous Post","bbfse-plugin"),description:(0,e.__)("Displays the post link that precedes the current post in Bootstrap style.","bbfse-plugin"),icon:u,attributes:{type:"previous",className:"btn btn-secondary"},scope:["inserter","transform"],example:{attributes:{className:"btn btn-secondary",type:"previous",label:(0,e.__)("Previous post","bbfse-plugin")}}},{isDefault:!0,name:"post-next",title:(0,e.__)("Bootstrap Next Post","bbfse-plugin"),description:(0,e.__)("Displays the post link that follows the current post in Bootstrap style.","bbfse-plugin"),icon:c,attributes:{type:"next",className:"btn btn-secondary"},scope:["inserter","transform"],example:{attributes:{className:"btn btn-secondary",type:"next",label:(0,e.__)("Next post","bbfse-plugin")}}}];x.forEach(e=>{e.isActive=(e,t)=>e.type===t.type});const _=x;(0,t.registerBlockType)(l.UU,{icon:c,edit:function({context:{postType:t},attributes:l,setAttributes:o}){const{type:u,label:c,showTitle:x,taxonomy:_,prependTextHtml:d,appendTextHtml:h,rel:g,tabindex:f,dataAttributes:m,ariaAttributes:y}=l,v="next"===u,w=v?"next":"prev",T=v?(0,e.__)("Next","bbfse-plugin"):(0,e.__)("Previous","bbfse-plugin"),j=e=>0===Object.keys(e||{}).length,k=(0,e.__)("An example title","bbfse-plugin"),C=(0,a.useSelect)(e=>e(i.store).getTaxonomies({type:t,per_page:-1}),[t]),D=[{label:(0,e.__)("Unfiltered (default)","bbfse-plugin"),value:""},...(null!=C?C:[]).filter(({visibility:e})=>!!e?.publicly_queryable).map(e=>({label:e.name,value:e.slug}))],A=(0,n.useBlockProps)({className:"post-navigation-link-"+u,rel:g||w,...""!==f?{tabIndex:f}:{},...p(m,"data-"),...p(y,"aria-"),onClick:e=>e.preventDefault()});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.InspectorControls,{children:[(0,r.jsxs)(s.__experimentalToolsPanel,{label:(0,e.__)("Settings","bbfse-plugin"),resetAll:()=>{o({showTitle:!1,prependTextHtml:"",appendTextHtml:""})},children:[(0,r.jsx)(s.__experimentalToolsPanelItem,{label:(0,e.__)("Display the title as a link","bbfse-plugin"),isShownByDefault:!0,hasValue:()=>!!x,onDeselect:()=>o({showTitle:!1}),children:(0,r.jsx)(s.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,e.__)("Display the title as a link","bbfse-plugin"),help:(0,e.__)("If you have entered a custom label, it will be prepended before the title.","bbfse-plugin"),checked:!!x,onChange:()=>o({showTitle:!x})})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{label:(0,e.__)("Prepend text/HTML","bbfse-plugin"),isShownByDefault:!0,hasValue:()=>""!==d,onDeselect:()=>o({prependTextHtml:""}),children:(0,r.jsx)(s.TextControl,{label:(0,e.__)("Prepend text/HTML","bbfse-plugin"),value:d,onChange:e=>o({prependTextHtml:e}),help:(0,e.__)("Text or HTML to prepend before the link text.","bbfse-plugin")})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{label:(0,e.__)("Append text/HTML","bbfse-plugin"),isShownByDefault:!0,hasValue:()=>""!==h,onDeselect:()=>o({appendTextHtml:""}),children:(0,r.jsx)(s.TextControl,{label:(0,e.__)("Append text/HTML","bbfse-plugin"),value:h,onChange:e=>o({appendTextHtml:e}),help:(0,e.__)("Text or HTML to append after the link text.","bbfse-plugin")})})]}),(0,r.jsxs)(s.__experimentalToolsPanel,{label:(0,e.__)("Link Attributes","bbfse-plugin"),resetAll:()=>{o({rel:"",tabindex:""})},children:[(0,r.jsx)(s.__experimentalToolsPanelItem,{label:(0,e.__)("Rel","bbfse-plugin"),isShownByDefault:!0,hasValue:()=>""!==g,onDeselect:()=>o({rel:""}),children:(0,r.jsx)(s.TextControl,{label:(0,e.__)("Rel","bbfse-plugin"),value:g,onChange:e=>o({rel:e})})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{label:(0,e.__)("Tab index","bbfse-plugin"),isShownByDefault:!0,hasValue:()=>""!==f,onDeselect:()=>o({tabindex:""}),children:(0,r.jsx)(s.TextControl,{label:(0,e.__)("Tab index","bbfse-plugin"),value:f,onChange:e=>o({tabindex:e})})})]}),(0,r.jsxs)(s.__experimentalToolsPanel,{label:(0,e.__)("Data and Aria Attributes","bbfse-plugin"),resetAll:()=>o({dataAttributes:{},ariaAttributes:{}}),children:[(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!j(m),label:(0,e.__)("Data attributes","bbfse-plugin"),onDeselect:()=>o({dataAttributes:{}}),isShownByDefault:!0,children:(0,r.jsx)(b,{label:(0,e.__)("Data attributes","bbfse-plugin")+" ",value:m,onChange:e=>o({dataAttributes:e})})}),(0,r.jsx)(s.__experimentalToolsPanelItem,{hasValue:()=>!j(y),label:(0,e.__)("Aria attributes","bbfse-plugin"),onDeselect:()=>o({ariaAttributes:{}}),isShownByDefault:!0,children:(0,r.jsx)(b,{label:(0,e.__)("Aria attributes","bbfse-plugin")+" ",value:y,onChange:e=>o({ariaAttributes:e})})})]})]}),(0,r.jsx)(n.InspectorControls,{group:"advanced",children:(0,r.jsx)(s.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,e.__)("Filter by taxonomy","bbfse-plugin"),value:_,options:D,onChange:e=>o({taxonomy:e}),help:(0,e.__)("Only link to posts that have the same taxonomy terms as the current post. For example the same tags or categories.","bbfse-plugin")})}),(0,r.jsxs)("a",{...A,children:[!!d&&(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:d}}),x?(0,r.jsx)(r.Fragment,{children:k}):(0,r.jsx)(n.RichText,{tagName:"span",identifier:"label","aria-label":v?(0,e.__)("Next post","bbfse-plugin"):(0,e.__)("Previous post","bbfse-plugin"),placeholder:T,value:c,withoutInteractiveFormatting:!0,onChange:e=>o({label:e})}),!!h&&(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:h}})]})]})},variations:_,example:{attributes:{className:"btn btn-secondary",type:"next",label:(0,e.__)("Bootstrap Next Post","bbfse-plugin")}}})})();