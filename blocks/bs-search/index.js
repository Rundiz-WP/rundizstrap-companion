(()=>{"use strict";const n=window.wp.blocks,e=JSON.parse('{"UU":"rundizstrap-companion/blocks-bs-search"}'),t=window.wp.i18n,o=window.wp.blockEditor,a=window.wp.element,l=window.wp.components;function s(n,e=""){if("string"!=typeof n)return n;let t=n.replace(/%[a-fA-F0-9][a-fA-F0-9]/g,"");return t=t.replace(/[^A-Za-z0-9_-]/g,""),""===t&&e?s(e):t}function r(n,e=!1){const t="string"==typeof n?n:"",o=/\s$/.test(t),a=t.split(/\s+/).map(n=>s(n)).filter(n=>""!==n).join(" ");return e&&o&&""!==a?a+" ":a}const i=window.ReactJSXRuntime;(0,n.registerBlockType)(e.UU,{icon:{src:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-search",viewBox:"0 0 16 16",children:(0,i.jsx)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})})},edit:function({attributes:n,setAttributes:e}){const{forNavbar:s,showLabel:c,label:u,buttonUseIcon:p,buttonPosition:d,buttonClass:b,buttonText:h,placeholderText:m}=n;(0,a.useEffect)(()=>{s&&c&&e({showLabel:!1}),n.buttonClass||e({buttonClass:"btn btn-primary"}),n.label||e({label:(0,t.__)("Search","rundizstrap-companion")}),n.buttonText||e({buttonText:(0,t.__)("Search","rundizstrap-companion")})},[n,b,h,s,c,e]);const x=(0,a.useRef)(),_=(0,a.useRef)(),g=[{label:(0,t.__)("Button outside","rundizstrap-companion"),value:"button-outside"},{label:(0,t.__)("Button group with input","rundizstrap-companion"),value:"button-group-input"},{label:(0,t.__)("No button","rundizstrap-companion"),value:"no-button"}],j=!1,w="button-outside",f="btn btn-primary",v=g.map(n=>n.value),z=n=>{const e="string"==typeof n?n:"";return v.includes(e)?e:w},C=z(d),T=r(b||""),B=(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.InspectorControls,{children:(0,i.jsxs)(l.__experimentalToolsPanel,{label:(0,t.__)("Settings","rundizstrap-companion"),resetAll:()=>{e({forNavbar:!1,showLabel:!1,buttonPosition:w,buttonUseIcon:j})},children:[(0,i.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>s,label:(0,t.__)("For navbar","rundizstrap-companion"),onDeselect:()=>{e({forNavbar:!1})},isShownByDefault:!0,children:(0,i.jsx)(l.ToggleControl,{checked:s,label:(0,t.__)("For navbar","rundizstrap-companion"),onChange:n=>e({forNavbar:n})})}),!s&&(0,i.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>c,label:(0,t.__)("Show label","rundizstrap-companion"),onDeselect:()=>{e({showLabel:!1})},isShownByDefault:!0,children:(0,i.jsx)(l.ToggleControl,{checked:c,label:(0,t.__)("Show label","rundizstrap-companion"),onChange:n=>e({showLabel:n})})}),(0,i.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>C!==w,label:(0,t.__)("Button position","rundizstrap-companion"),onDeselect:()=>{e({buttonPosition:w})},isShownByDefault:!0,children:(0,i.jsx)(l.SelectControl,{value:C,__next40pxDefaultSize:!0,label:(0,t.__)("Button position","rundizstrap-companion"),onChange:n=>{e({buttonPosition:z(n)})},options:g})}),"no-button"!==C&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>!0,label:(0,t.__)("Button use icon","rundizstrap-companion"),onDeselect:()=>{e({buttonUseIcon:j})},isShownByDefault:!0,children:(0,i.jsx)(l.ToggleControl,{checked:p,label:(0,t.__)("Button use icon","rundizstrap-companion"),onChange:n=>e({buttonUseIcon:n})})}),(0,i.jsx)(l.__experimentalToolsPanelItem,{hasValue:()=>b!==f,label:(0,t.__)("Button classes","rundizstrap-companion"),onDeselect:()=>{e({buttonClass:f})},isShownByDefault:!0,children:(0,i.jsx)(l.TextControl,{label:(0,t.__)("Button classes","rundizstrap-companion"),value:b,onChange:n=>e({buttonClass:r(n,!0)}),onBlur:()=>e({buttonClass:r(b||"")})})})]})]})})}),F=()=>{let n="form-control";return!0===s&&"button-group-input"!==C&&"no-button"!==C&&(n+=" me-2"),(0,i.jsx)("input",{type:"search",className:n,"aria-label":(0,t.__)("Optional placeholder text","rundizstrap-companion"),placeholder:m?void 0:(0,t.__)("Optional placeholder…","rundizstrap-companion"),value:m,onChange:n=>e({placeholderText:n.target.value}),ref:x})},S=()=>{let n=f;T&&(n=T);const a=!0===p;let s=h;return a&&(s='<i class="bi bi-search"></i>'),a?(0,i.jsx)(l.Disabled,{children:(0,i.jsx)("button",{type:"button",className:n,"aria-label":(0,t.__)("Search","rundizstrap-companion"),children:(0,i.jsx)("i",{className:"bi bi-search","aria-hidden":"true"})})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.RichText,{identifier:"buttonText",className:n,"aria-label":(0,t.__)("Button text","rundizstrap-companion"),placeholder:(0,t.__)("Add button text…","rundizstrap-companion"),withoutInteractiveFormatting:!0,value:s,onChange:n=>e({buttonText:n}),ref:_})})},y=(0,o.useBlockProps)({className:s?"d-flex":void 0});return(0,i.jsxs)("div",{...y,children:[B,!s&&c&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{class:"row",children:(0,i.jsx)("div",{class:"col-12",children:(0,i.jsx)(o.RichText,{identifier:"label","aria-label":(0,t.__)("Label text","rundizstrap-companion"),placeholder:(0,t.__)("Add label…","rundizstrap-companion"),withoutInteractiveFormatting:!0,value:u,onChange:n=>e({label:n})})})})}),s?(0,i.jsx)(i.Fragment,{children:"button-group-input"===C?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{class:"input-group",children:[F(),S()]})}):(0,i.jsxs)(i.Fragment,{children:[F(),"no-button"!==C&&(0,i.jsx)(i.Fragment,{children:S()})]})}):(0,i.jsx)(i.Fragment,{children:"button-group-input"===C?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{class:"input-group",children:[F(),S()]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{class:"row g-3",children:[(0,i.jsx)("div",{className:"no-button"===C?"col-12":"col",children:F()}),"no-button"!==C&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{class:"col-auto",children:S()})})]})})})]})}})})();